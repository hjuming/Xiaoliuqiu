<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>嶼野山隱 | 小琉球質感露營體驗</title>

    <!-- Social Share Meta Tags -->
    <meta property="og:title" content="嶼野 山隱 露營區" />
    <meta property="og:description" content="🌴露營風格木屋🌴 💛戶外景觀池 💛綠草皮 💛不怕吵到隔壁房" />
    <meta property="og:image" content="https://l.urusai.cc/b146j.png" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://Xiaoliuqiu.wedopr.com" />

    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Google Fonts 和 icon -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <!-- 引入 EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        /* 使用 Noto Sans TC 作為主要字體 */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa;
        }
        /* 讓右側預訂區塊在捲動時固定 */
        .sticky-booking {
            position: -webkit-sticky;
            position: sticky;
            top: 2rem;
        }
        /* 增加可折疊區塊的樣式 */
        .accordion-content, .room-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        /* 日曆樣式 */
        .calendar-day.disabled {
            color: #d1d5db;
            pointer-events: none;
        }
        .calendar-day.selected {
            background-color: #10b981;
            color: white;
            border-radius: 50%;
        }
        .calendar-day.in-range {
            background-color: #a7f3d0;
            color: #064e3b;
            border-radius: 0;
        }
        .calendar-day.range-start {
            border-top-left-radius: 50%;
            border-bottom-left-radius: 50%;
        }
        .calendar-day.range-end {
            border-top-right-radius: 50%;
            border-bottom-right-radius: 50%;
        }
        /* 縮圖滑動條樣式 */
        .thumbnail-slider {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .thumbnail-slider::-webkit-scrollbar {
            display: none; /* Chrome, Safari, and Opera */
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <a href="#" class="text-2xl font-bold text-teal-600">YuYe ShanYin Camping</a>
                </div>
                <div class="relative">
                     <button id="desktop-menu-button" class="text-gray-700 hover:text-teal-600 focus:outline-none p-2 rounded-md hover:bg-gray-100 flex items-center">
                        <span class="hidden sm:inline mr-2">探索更多</span>
                        <i class="fas fa-bars fa-lg"></i>
                    </button>
                    <!-- Desktop Dropdown -->
                    <div id="desktop-menu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 z-50">
                        <a href="https://www.booking-owlnest.com/lightofthedawn" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">微光晨曦</a>
                        <a href="https://www.booking-owlnest.com/1a52fa97-9780-41bb-b3de-8755e7816229" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">小謎路</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- 標題和地點 -->
        <div>
            <h1 class="text-3xl font-bold text-gray-900">嶼野 山隱 露營區</h1>
            <div class="flex items-center mt-2 text-gray-600">
                <i class="fas fa-map-marker-alt mr-2"></i>
                <a href="https://maps.app.goo.gl/RaPS2MQyZgkSpQAV6" target="_blank" rel="noopener noreferrer" class="hover:text-teal-600 hover:underline">
                    屏東縣琉球鄉中正路206-38號
                </a>
            </div>
        </div>

        <!-- 圖片區 -->
        <div class="mt-6">
            <!-- Hero Image -->
            <div class="w-full h-[50vh] rounded-xl overflow-hidden shadow-lg">
                 <img src="https://l.urusai.cc/b146j.png" alt="嶼野山隱露營區主圖" class="main-gallery-item w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity" data-index="0">
            </div>
            <!-- Thumbnail Slider -->
            <div class="main-thumbnail-slider thumbnail-slider flex space-x-2 mt-2 overflow-x-auto p-1">
                 <!-- 主縮圖將由 JS 動態生成 -->
            </div>
        </div>


        <!-- 房源資訊 & 預訂區塊 -->
        <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-12">
            
            <!-- 左側：詳細資訊 -->
            <div class="lg:col-span-2">
                <!-- 房源簡介 -->
                <div class="pb-6 border-b">
                    <h2 class="text-2xl font-semibold text-gray-800">露營風格木屋</h2>
                     <div class="flex flex-wrap gap-x-4 gap-y-2 mt-3 text-gray-700">
                        <span>💛 戶外景觀池</span>
                        <span>💛 綠草皮</span>
                        <span>💛 不怕吵到隔壁房</span>
                    </div>
                </div>
                
                <!-- 旅宿簡介 -->
                 <div class="py-6 border-b">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">關於「嶼野山隱」</h3>
                    <p class="text-gray-700 leading-relaxed">
                        這是一個提供多樣化露營體驗的園區，包含豪華露營、露營車、免裝備露營等等。在這裡，您可以享受戶外景觀池和寬闊的綠草皮，體驗最純粹的自然風光。我們也提供多種加值套餐行程，如船票、機車租賃、BBQ吃到飽、浮潛、SUP等，讓您的旅程更加豐富。
                    </p>
                </div>

                <!-- 房型介紹 -->
                <div class="py-6 border-b">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">房型介紹</h3>
                    <div class="space-y-6">
                        <!-- 雙人房 -->
                        <div class="p-4 border rounded-lg bg-white shadow">
                            <div class="relative w-full h-64 rounded-lg overflow-hidden mb-3">
                                <img src="https://i.urusai.cc/bUrmL.png" alt="雙人套房代表圖" class="twin-gallery-item w-full h-full object-cover cursor-pointer" data-index="0">
                                <div class="absolute bottom-0 left-0 bg-black bg-opacity-50 text-white p-3 w-full">
                                    <h4 class="font-bold">【露營屋】雙人套房</h4>
                                </div>
                            </div>
                            <div class="twin-thumbnail-slider thumbnail-slider flex space-x-2 overflow-x-auto p-1 mb-2">
                                <!-- 雙人房縮圖將由 JS 動態生成 -->
                            </div>
                            <p class="text-sm text-gray-600">基本入住人數：2 | 15平方公尺 | 獨立房間 | 禁菸房 | 1張標準雙人床 | 不含餐</p>
                            <div class="mt-4">
                                <button class="room-accordion-toggle text-sm font-semibold text-teal-600 hover:text-teal-800 flex items-center">
                                    <span>顯示詳細設施</span>
                                    <i class="fas fa-chevron-down transform transition-transform text-xs ml-1"></i>
                                </button>
                                <div class="room-accordion-content mt-3 text-sm text-gray-700">
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3">
                                        <div>
                                            <h5 class="font-bold mb-1">房型特色</h5>
                                            <ul class="list-disc list-inside space-y-1">
                                                <li>禁菸房</li>
                                                <li>房內有窗</li>
                                                <li>無線網路</li>
                                                <li>寵物可入房</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h5 class="font-bold mb-1">房間設備</h5>
                                            <ul class="list-disc list-inside space-y-1">
                                                <li>標準雙人床</li>
                                                <li>桌椅</li>
                                                <li>衣架</li>
                                                <li>冷暖氣</li>
                                                <li>電視</li>
                                                <li>冰箱</li>
                                            </ul>
                                        </div>
                                        <div class="sm:col-span-2">
                                            <h5 class="font-bold mb-1">衛浴設備</h5>
                                            <ul class="list-disc list-inside grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1">
                                                <li>專屬衛浴</li>
                                                <li>乾濕分離</li>
                                                <li>淋浴設備</li>
                                                <li>熱水器</li>
                                                <li>吹風機</li>
                                                <li>浴巾</li>
                                                <li>洗髮沐浴乳</li>
                                                <li>衛生紙</li>
                                            </ul>
                                            <p class="text-xs text-gray-500 mt-2">* 為響應環保，不提供牙刷、牙膏、小毛巾等一次性備品。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 四人房 -->
                        <div class="p-4 border rounded-lg bg-white shadow">
                             <div class="relative w-full h-64 rounded-lg overflow-hidden mb-3">
                                <img src="https://i.urusai.cc/YbaSU.png" alt="四人套房代表圖" class="quad-gallery-item w-full h-full object-cover cursor-pointer" data-index="0">
                                <div class="absolute bottom-0 left-0 bg-black bg-opacity-50 text-white p-3 w-full">
                                    <h4 class="font-bold">【露營屋】四人套房</h4>
                                </div>
                            </div>
                            <div class="quad-thumbnail-slider thumbnail-slider flex space-x-2 overflow-x-auto p-1 mb-2">
                                <!-- 四人房縮圖將由 JS 動態生成 -->
                            </div>
                            <p class="text-sm text-gray-600">基本入住人數：4 | 20平方公尺 | 獨立房間 | 禁菸房 | 2張標準雙人床 | 不含餐</p>
                            <div class="mt-4">
                                <button class="room-accordion-toggle text-sm font-semibold text-teal-600 hover:text-teal-800 flex items-center">
                                    <span>顯示詳細設施</span>
                                    <i class="fas fa-chevron-down transform transition-transform text-xs ml-1"></i>
                                </button>
                                <div class="room-accordion-content mt-3 text-sm text-gray-700">
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3">
                                        <div>
                                            <h5 class="font-bold mb-1">房型特色</h5>
                                            <ul class="list-disc list-inside space-y-1">
                                                <li>禁菸房</li>
                                                <li>房內有窗</li>
                                                <li>無線網路</li>
                                                <li>寵物可入房</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h5 class="font-bold mb-1">房間設備</h5>
                                            <ul class="list-disc list-inside space-y-1">
                                                <li>標準雙人床 x 2</li>
                                                <li>桌椅</li>
                                                <li>衣架</li>
                                                <li>冷暖氣</li>
                                                <li>電視</li>
                                                <li>冰箱</li>
                                            </ul>
                                        </div>
                                        <div class="sm:col-span-2">
                                            <h5 class="font-bold mb-1">衛浴設備</h5>
                                            <ul class="list-disc list-inside grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1">
                                                <li>專屬衛浴</li>
                                                <li>乾濕分離</li>
                                                <li>淋浴設備</li>
                                                <li>熱水器</li>
                                                <li>吹風機</li>
                                                <li>浴巾</li>
                                                <li>洗髮沐浴乳</li>
                                                <li>衛生紙</li>
                                            </ul>
                                            <p class="text-xs text-gray-500 mt-2">* 為響應環保，不提供牙刷、牙膏、小毛巾等一次性備品。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 五人房 -->
                        <div class="p-4 border rounded-lg bg-white shadow">
                            <div class="relative w-full h-64 rounded-lg overflow-hidden mb-3">
                                <img src="https://i.urusai.cc/ZOfHR.png" alt="五人房代表圖" class="five-gallery-item w-full h-full object-cover cursor-pointer" data-index="0">
                                <div class="absolute bottom-0 left-0 bg-black bg-opacity-50 text-white p-3 w-full">
                                    <h4 class="font-bold">【露營屋】五人房（四人雅房+單人床）</h4>
                                </div>
                            </div>
                            <div class="five-thumbnail-slider thumbnail-slider flex space-x-2 overflow-x-auto p-1 mb-2">
                                <!-- 五人房縮圖將由 JS 動態生成 -->
                            </div>
                            <p class="text-sm text-gray-600">基本入住人數：5 | 25平方公尺 | 獨立房間 | 禁菸房 | 1張單人床 + 2張標準雙人床 | 不含餐 | <span class="text-red-600 font-semibold">專屬衛浴在房間外</span></p>
                            <div class="mt-4">
                                <button class="room-accordion-toggle text-sm font-semibold text-teal-600 hover:text-teal-800 flex items-center">
                                    <span>顯示詳細設施</span>
                                    <i class="fas fa-chevron-down transform transition-transform text-xs ml-1"></i>
                                </button>
                                <div class="room-accordion-content mt-3 text-sm text-gray-700">
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3">
                                        <div>
                                            <h5 class="font-bold mb-1">房型特色</h5>
                                            <ul class="list-disc list-inside space-y-1">
                                                <li>禁菸房</li>
                                                <li>房內有窗</li>
                                                <li>無線網路</li>
                                                <li>寵物可入房</li>
                                                <li class="text-red-600 font-semibold">專屬衛浴在房間外</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h5 class="font-bold mb-1">房間設備</h5>
                                            <ul class="list-disc list-inside space-y-1">
                                                <li>標準雙人床 x 2</li>
                                                <li>單人床 x 1</li>
                                                <li>桌椅</li>
                                                <li>衣架</li>
                                                <li>冷暖氣</li>
                                                <li>電視</li>
                                                <li>冰箱</li>
                                            </ul>
                                        </div>
                                        <div class="sm:col-span-2">
                                            <h5 class="font-bold mb-1">衛浴設備</h5>
                                            <ul class="list-disc list-inside grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1">
                                                <li class="text-red-600 font-semibold">專屬衛浴(房外)</li>
                                                <li>乾濕分離</li>
                                                <li>淋浴設備</li>
                                                <li>熱水器</li>
                                                <li>吹風機</li>
                                                <li>浴巾</li>
                                                <li>洗髮沐浴乳</li>
                                                <li>衛生紙</li>
                                            </ul>
                                            <p class="text-xs text-gray-500 mt-2">* 為響應環保，不提供牙刷、牙膏、小毛巾等一次性備品。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 住宿守則等詳細資訊 (可折疊) -->
                <div class="py-6 space-y-4">
                     <h3 class="text-xl font-semibold text-gray-800 mb-4">詳細資訊與規定</h3>
                    
                    <!-- 入住守則 -->
                    <div>
                        <button class="accordion-toggle w-full text-left font-semibold text-lg p-4 bg-gray-100 rounded-lg flex justify-between items-center hover:bg-gray-200">
                            <span>住宿守則</span>
                            <i class="fas fa-chevron-down transform transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 bg-white border rounded-b-lg">
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                    <li>入房時間：15:00pm (可先至民宿停車場放行李) 貴重物請自行保管，遺失不負責。</li>
                                    <li>退房時間：11:00am (延遲退房將酌收延遲費用，每半小時TWD$300)。</li>
                                    <li>續住不打掃，入住期間浴巾提供一次。房間內浴巾請勿帶出使用，以免遺失。</li>
                                    <li>防疫期間請房客進入民宿時噴酒精消毒、戴口罩。</li>
                                    <li>為維護住宿安全，請勿在民宿室內外開火烹煮食物。包區有提供烤肉地。</li>
                                    <li>為響應環保，未提供小毛巾、牙膏、牙刷、洗面乳。</li>
                                    <li>房內提供吹風機、浴巾、橄欖沐浴洗髮二合一。</li>
                                    <li>請勿隨意搬動、破壞民宿家具物品，若有損壞或遺失，將照價索取賠償 (鑰匙TWD$350/浴巾TWD$350/房內遙控器TWD$600/吹風機TWD$500)。</li>
                                    <li>請節約能源，冷氣請勿設定23度以下，外出請關掉冷氣、電視、電燈。</li>
                                    <li>民宿臨近住宅區，晚間10:00後室內、外空間請降低音量(含包區客人) 若無法遵守,訂房前請三思。</li>
                                    <li>入住人數超過預定人數，民宿加收費用，嚴禁訪客參觀。</li>
                                    <li>垃圾需分類，嚴禁賭博、吸毒、酗酒等，若發現不法情事，本宿有權報警處理，費用不退回。</li>
                                    <li>全面禁菸(含電子菸)，配合菸害防制法，房內廁所禁止吸菸，若違法需多付兩天房價作為清潔費。</li>
                                    <li>室內禁止嚼食檳榔，寢具用品、浴巾若有經血、泥土、嘔吐、尿床、酒漬等過分髒亂，則另加收清潔費TWD$6000。</li>
                                    <li>民宿外設有景觀池僅供觀賞，請注意幼童及長者安全，若發生危險後果自負。</li>
                                    <li>戶外景觀區步道嚴禁丟石頭，若毀損玻璃等設施，照價賠償。</li>
                                    <li>退房請將鑰匙放在大廳櫃台，謝謝配合!</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 寵物規定 -->
                     <div>
                        <button class="accordion-toggle w-full text-left font-semibold text-lg p-4 bg-gray-100 rounded-lg flex justify-between items-center hover:bg-gray-200">
                            <span>寵物入營小叮嚀</span>
                             <i class="fas fa-chevron-down transform transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 bg-white border rounded-b-lg">
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                    <li>攜帶寵物必須在訂單備註並於現場收費，提前告知營主。</li>
                                    <li>攜帶寵物需酌收清潔費TWD$600/隻 (僅可攜帶小型犬)。若有物品損壞或嚴重髒汙視情況而定收取額外費用。</li>
                                    <li>勿讓寵物隨地便溺。</li>
                                    <li>寵物不可隨意上沙發以及床。請不要使用浴巾擦寵物、不在房內吹毛或梳毛。</li>
                                    <li>若寵物到不熟悉環境下會吠叫，請主人設法制止，以免影響到其他旅客。</li>
                                    <li>寵物不能單獨留在帳篷，如外出需攜帶寵物一同出門。</li>
                                    <li>維護寵物住宿禮節，寵物請加上鍊條或放置外出籠中。</li>
                                    <li>請勿攜帶有列管、危險性、攻擊性、不受控制的寵(動)物，為維護露友安全，營主保留現場拒絕進入營區之權利。</li>
                                    <li>如有傷害他人或損壞他人裝備，請自行負責，與本營區無關。</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 加購行程與聯絡方式 -->
                    <div>
                        <button class="accordion-toggle w-full text-left font-semibold text-lg p-4 bg-gray-100 rounded-lg flex justify-between items-center hover:bg-gray-200">
                            <span>加購行程與聯絡方式</span>
                            <i class="fas fa-chevron-down transform transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 bg-white border rounded-b-lg text-gray-700 space-y-4">
                                <div>
                                    <h5 class="font-bold text-blue-800">💙 住宿可加套餐行程</h5>
                                    <p class="mt-2">船票 / 摩托車 / BBQ吃到飽 / 浮潛 / SUP立槳 / 半潛艇 / 深潛 / 梅花鹿園區 / 海洋館 / 夜間導覽</p>
                                </div>
                                <div class="text-sm">
                                    <h5 class="font-bold">PS. 關於來回船票、機車代訂（需加購費用）</h5>
                                    <p class="mt-1">請加入官方LINE洽詢</p>
                                    <p>官方LINE ID: <span class="font-semibold text-teal-600">＠356aoexy</span></p>
                                    <p>聯絡電話: <span class="font-semibold">0987-463-866</span></p>
                                    <p>Email: <span class="font-semibold">freya060866@gmail.com</span></p>
                                </div>
                            </div>
                        </div>
                    </div>

                     <!-- 手機收訊狀況 -->
                     <div>
                        <button class="accordion-toggle w-full text-left font-semibold text-lg p-4 bg-gray-100 rounded-lg flex justify-between items-center hover:bg-gray-200">
                            <span>手機收訊狀況</span>
                             <i class="fas fa-chevron-down transform transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 bg-white border rounded-b-lg text-gray-700">
                               <ul class="list-none space-y-1">
                                   <li>台灣大哥大：有訊號，訊號良好</li>
                                   <li>中華電信：有訊號，訊號良好</li>
                                   <li>遠傳電信：有訊號，訊號良好</li>
                                   <li>台灣之星：有訊號，訊號差</li>
                                   <li>亞太電信：有訊號，訊號差</li>
                               </ul>
                            </div>
                        </div>
                    </div>

                     <!-- 退訂政策 -->
                     <div>
                        <button class="accordion-toggle w-full text-left font-semibold text-lg p-4 bg-gray-100 rounded-lg flex justify-between items-center hover:bg-gray-200">
                            <span>退訂政策</span>
                             <i class="fas fa-chevron-down transform transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 bg-white border rounded-b-lg text-gray-700 space-y-2">
                               <p>旅客於房費總金額支付完成後，因個人因素須退款時，依以下取消時間點與退款比例推算：</p>
                               <ul class="list-disc list-inside pl-4">
                                   <li>旅客解約通知於預定住宿日前第三日以前到達者，業者應退還預收約定房價總金額百分之百。</li>
                                   <li>旅客解約通知於預定住宿日前第一日至第二日到達者，業者應退還預收約定房價總金額百分之五十。</li>
                                   <li>旅客解約通知於預定住宿日當日到達或未為解約通知者，業者得不退還預收約定房價總金額。</li>
                               </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 常見問題 FAQ -->
                     <div>
                        <button class="accordion-toggle w-full text-left font-semibold text-lg p-4 bg-gray-100 rounded-lg flex justify-between items-center hover:bg-gray-200">
                            <span>常見問題 (FAQ)</span>
                             <i class="fas fa-chevron-down transform transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 bg-white border rounded-b-lg space-y-4 text-gray-700">
                                <div>
                                    <h5 class="font-semibold">Q1：請問如何前往「嶼野山隱」？</h5>
                                    <p class="mt-1 pl-2">A：您需要先搭船至小琉球。抵達後，若您有加購方案或提前預約，我們會提供碼頭的行李接送服務。您可以使用Google Maps導航至「屏東縣琉球鄉中正路206-38號」。</p>
                                </div>
                                <div>
                                    <h5 class="font-semibold">Q2：營區內可以自己開伙或烤肉嗎？</h5>
                                    <p class="mt-1 pl-2">A：為維護住宿安全，所有房型室內外皆禁止開火烹煮。若有包區的旅客，我們有提供指定的烤肉場地，您也可以向我們預訂BBQ吃到飽套餐。</p>
                                </div>
                                <div>
                                    <h5 class="font-semibold">Q3：房間內有哪些盥洗用品？需要自己帶什麼嗎？</h5>
                                    <p class="mt-1 pl-2">A：我們房內提供吹風機、浴巾、以及洗髮沐浴二合一。為響應環保，我們不主動提供一次性用品，建議您自行攜帶牙刷、牙膏、小毛巾等個人盥洗用品。</p>
                                </div>
                                <div>
                                    <h5 class="font-semibold">Q4：請問可以提早入住或延後退房嗎？</h5>
                                    <p class="mt-1 pl-2">A：我們的入住時間為下午15:00後，退房時間為上午11:00前。若您提早抵達，可以先至營區寄放行李。若需延後退房，將會酌收延遲費用，每半小時TWD$300。</p>
                                </div>
                                 <div>
                                    <h5 class="font-semibold">Q5：請問如何預訂船票、機車或水上活動？</h5>
                                    <p class="mt-1 pl-2">A：我們提供多樣化的加購服務，您可以直接加入我們的官方LINE ID: <span class="font-semibold text-teal-600">＠356aoexy</span>，將有專人為您服務及報價。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右側：預訂卡片 -->
            <div class="lg:col-span-1">
                <div id="booking-card" class="sticky-booking bg-white p-6 rounded-xl shadow-lg border">
                    <div id="booking-form-container">
                        <p class="text-lg font-semibold text-gray-800 mb-4">預訂您的露營體驗</p>
                        
                        <!-- 嵌入式日曆 -->
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <button id="prev-month" class="p-2 rounded-full hover:bg-gray-100"><i class="fas fa-chevron-left"></i></button>
                                <h4 id="calendar-header" class="font-semibold text-center"></h4>
                                <button id="next-month" class="p-2 rounded-full hover:bg-gray-100"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <div id="calendar-grid"></div>
                            <div id="selected-dates-display" class="text-center text-sm text-gray-600 mt-2 h-5 font-medium"></div>
                        </div>

                        <!-- 房型與數量選擇 -->
                        <div id="room-selection" class="space-y-3 pt-4 border-t mt-4">
                           <!-- 房型會動態生成於此 -->
                        </div>

                        <!-- 價格明細 -->
                        <div id="price-details" class="mt-6 pt-4 border-t space-y-2 hidden">
                             <div id="price-breakdown-container" class="space-y-1">
                                 <!-- 分項費用會動態生成於此 -->
                             </div>
                            <div class="flex justify-between font-bold text-gray-900 mt-2 pt-2 border-t">
                                <span>總價</span>
                                <span id="total-price">NT$ 0</span>
                            </div>
                        </div>
                        
                        <!-- 訂戶資訊 -->
                        <div id="customer-info-container" class="mt-4 pt-4 border-t space-y-4">
                            <div>
                               <label for="customer-name" class="block text-sm font-medium text-gray-700">姓名</label>
                               <input type="text" id="customer-name" name="customer-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm" placeholder="王大明">
                            </div>
                            <div>
                               <label for="customer-email" class="block text-sm font-medium text-gray-700">Email</label>
                               <input type="email" id="customer-email" name="customer-email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm" placeholder="example@email.com">
                            </div>
                        </div>


                        <button id="reserve-button" class="w-full bg-teal-600 text-white font-bold py-3 px-4 rounded-lg mt-6 hover:bg-teal-700 transition-colors duration-300 shadow-md opacity-50 cursor-not-allowed" disabled>
                            預訂
                        </button>
                        <p class="text-center text-sm text-gray-500 mt-4">您暫時不會被收費</p>
                        
                    </div>
                    <!-- 預訂成功訊息 -->
                    <div id="booking-confirmation" class="hidden text-center p-4 bg-green-100 text-green-800 rounded-lg">
                        <h4 class="font-bold text-lg">預訂成功！</h4>
                        <p class="text-sm mt-2">感謝您的預訂。訂單確認信已寄送至您的信箱，我們也已同步收到您的訂單資訊。</p>
                        <p class="text-xs mt-4">若未收到信件，請檢查垃圾郵件匣。</p>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Main Lightbox Modal -->
    <div id="main-lightbox" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden flex items-center justify-center">
        <button id="main-lightbox-close" class="absolute top-4 right-4 text-white text-3xl">&times;</button>
        <button id="main-lightbox-prev" class="absolute left-4 text-white text-3xl"><i class="fas fa-chevron-left"></i></button>
        <button id="main-lightbox-next" class="absolute right-4 text-white text-3xl"><i class="fas fa-chevron-right"></i></button>
        <div class="p-8">
            <img id="main-lightbox-img" src="" alt="放大圖片" class="max-w-[90vw] max-h-[90vh]">
        </div>
    </div>

    <!-- Twin Room Lightbox Modal -->
    <div id="twin-lightbox" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden flex items-center justify-center">
        <button id="twin-lightbox-close" class="absolute top-4 right-4 text-white text-3xl">&times;</button>
        <button id="twin-lightbox-prev" class="absolute left-4 text-white text-3xl"><i class="fas fa-chevron-left"></i></button>
        <button id="twin-lightbox-next" class="absolute right-4 text-white text-3xl"><i class="fas fa-chevron-right"></i></button>
        <div class="p-8">
            <img id="twin-lightbox-img" src="" alt="雙人房放大圖片" class="max-w-[90vw] max-h-[90vh]">
        </div>
    </div>
    
    <!-- Quad Room Lightbox Modal -->
    <div id="quad-lightbox" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden flex items-center justify-center">
        <button id="quad-lightbox-close" class="absolute top-4 right-4 text-white text-3xl">&times;</button>
        <button id="quad-lightbox-prev" class="absolute left-4 text-white text-3xl"><i class="fas fa-chevron-left"></i></button>
        <button id="quad-lightbox-next" class="absolute right-4 text-white text-3xl"><i class="fas fa-chevron-right"></i></button>
        <div class="p-8">
            <img id="quad-lightbox-img" src="" alt="四人房放大圖片" class="max-w-[90vw] max-h-[90vh]">
        </div>
    </div>

    <!-- Five Room Lightbox Modal -->
    <div id="five-lightbox" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden flex items-center justify-center">
        <button id="five-lightbox-close" class="absolute top-4 right-4 text-white text-3xl">&times;</button>
        <button id="five-lightbox-prev" class="absolute left-4 text-white text-3xl"><i class="fas fa-chevron-left"></i></button>
        <button id="five-lightbox-next" class="absolute right-4 text-white text-3xl"><i class="fas fa-chevron-right"></i></button>
        <div class="p-8">
            <img id="five-lightbox-img" src="" alt="五人房放大圖片" class="max-w-[90vw] max-h-[90vh]">
        </div>
    </div>

    <!-- Hidden Email Template -->
    <div id="email-template" style="display: none;">
        <div style="font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif; max-width: 600px; margin: 20px auto; background-color: #ffffff; border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden;">
            <img src="https://l.urusai.cc/b146j.png" alt="嶼野山隱 Banner" style="width: 100%; height: auto; border-radius: 8px 8px 0 0; display: block;">
            <div style="padding: 20px 30px; color: #333; line-height: 1.6;">
                <p style="font-size: 16px;">Hi {{to_name}},</p>
                <p>非常感謝您預訂嶼野山隱露營區！我們已初步收到您的訂單，以下是您的預訂資訊：</p>
                <div style="background-color: #f9f9f9; border-radius: 5px; padding: 15px; margin: 20px 0;">
                    <h3 style="margin-top: 0; border-bottom: 2px solid #eee; padding-bottom: 10px;">訂單明細</h3>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 8px 0; font-weight: bold; width: 100px;">入住日期</td>
                            <td style="padding: 8px 0; text-align: right;">{{dates}}</td>
                        </tr>
                        {{room_details_html}}
                        <tr style="border-top: 2px solid #eee; font-size: 18px; font-weight: bold;">
                            <td style="padding: 16px 0;">總金額</td>
                            <td style="padding: 16px 0; text-align: right; color: #0d9488;">{{total_price}}</td>
                        </tr>
                    </table>
                </div>
                <p>我們將在確認後盡快與您聯繫後續事宜，謝謝您的耐心等候！</p>
                <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
                    <h4 style="color: #0d9488;">重要注意事項</h4>
                    <ul style="padding-left: 20px; font-size: 14px; color: #555; line-height: 1.8;">
                        <li><b>入住/退房:</b> 15:00 後入住，11:00 前退房。</li>
                        <li><b>環保政策:</b> 為響應環保，不提供牙刷、牙膏、小毛巾等一次性備品。</li>
                        <li><b>寵物:</b> 攜帶寵物需提前告知並收取清潔費，且務必遵守寵物入營規定。</li>
                        <li><b>聯絡方式:</b> 若有任何問題，歡迎加入我們的官方LINE: @356aoexy</li>
                    </ul>
                </div>
            </div>
            <div style="background-color: #343a40; color: #adb5bd; text-align: center; padding: 20px; font-size: 12px;">
                <p style="margin: 0;">嶼野山隱 &copy; 2025 | 聯絡電話: 0987-463-866</p>
            </div>
        </div>
    </div>


    <!-- Footer -->
    <footer class="bg-white mt-12 border-t">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p>&copy; 2025 YuYe ShanYin Camping. 嶼野山隱 All rights reserved.</p>
            <a href="https://www.wedopr.com" target="_blank" rel="noopener noreferrer" class="text-sm text-teal-600 hover:underline">www.WEDOPR.com</a>
        </div>
    </footer>
    
<script>
document.addEventListener('DOMContentLoaded', function () {
    // --- (圖片資料 & Lightbox & 導覽選單 JS 維持不變) ---
    const mainImageUrls = [ 'https://l.urusai.cc/b146j.png', 'https://i.urusai.cc/yjRJa.png', 'https://i.urusai.cc/Yd7HG.png', 'https://i.urusai.cc/mCwaE.png', 'https://i.urusai.cc/KG4wW.png', 'https://i.urusai.cc/zJHB3.png', 'https://i.urusai.cc/9ytKz.png', 'https://i.urusai.cc/Febqf.png', 'https://i.urusai.cc/afUCX.png', 'https://i.urusai.cc/HMcbg.png', 'https://i.urusai.cc/JLzjs.png', 'https://i.urusai.cc/IR21L.png' ];
    const twinImageUrls = [ 'https://i.urusai.cc/bUrmL.png', 'https://i.urusai.cc/gG3FF.png', 'https://i.urusai.cc/qz2yw.png', 'https://i.urusai.cc/25mIG.png', 'https://i.urusai.cc/dbzyk.png', 'https://i.urusai.cc/8Oa0z.png', 'https://i.urusai.cc/IFlyT.png', 'https://i.urusai.cc/vBc8G.png' ];
    const quadImageUrls = [ 'https://i.urusai.cc/YbaSU.png', 'https://i.urusai.cc/l5SCN.png', 'https://i.urusai.cc/XiLB1.png', 'https://i.urusai.cc/wrnpP.png', 'https://i.urusai.cc/Y78rE.png', 'https://i.urusai.cc/8x4Gp.png', 'https://i.urusai.cc/Yynjj.png', 'https://i.urusai.cc/Unri5.png', 'https://i.urusai.cc/hBkl5.png', 'https://i.urusai.cc/hj5jd.png', 'https://i.urusai.cc/LtSJX.png' ];
    const fiveImageUrls = [ 'https://i.urusai.cc/ZOfHR.png', 'https://i.urusai.cc/2MIjs.png', 'https://i.urusai.cc/iGgsF.png', 'https://i.urusai.cc/BvjfJ.png', 'https://i.urusai.cc/4uP5D.png', 'https://i.urusai.cc/Ph6PT.png', 'https://i.urusai.cc/ZJ07v.png', 'https://i.urusai.cc/zvQf2.png', 'https://i.urusai.cc/nLV2f.png' ];

    function initializeLightbox(gallerySelector, lightboxId, imageUrls) {
        const lightbox = document.getElementById(lightboxId); if (!lightbox) return;
        const lightboxImg = lightbox.querySelector('img'); const closeBtn = lightbox.querySelector('button:first-of-type'); const prevBtn = lightbox.querySelector('button:nth-of-type(2)'); const nextBtn = lightbox.querySelector('button:nth-of-type(3)'); let currentIndex = 0;
        document.querySelectorAll(gallerySelector).forEach(item => { item.addEventListener('click', (e) => { currentIndex = parseInt(e.target.dataset.index); updateImage(); lightbox.classList.remove('hidden'); }); });
        function updateImage() { lightboxImg.src = imageUrls[currentIndex]; }
        closeBtn.addEventListener('click', () => lightbox.classList.add('hidden'));
        prevBtn.addEventListener('click', () => { currentIndex = (currentIndex - 1 + imageUrls.length) % imageUrls.length; updateImage(); });
        nextBtn.addEventListener('click', () => { currentIndex = (currentIndex + 1) % imageUrls.length; updateImage(); });
    }
    function renderThumbnails(selector, imageUrls, galleryItemClass) {
        const slider = document.querySelector(selector); if (!slider) return;
        imageUrls.slice(1).forEach((url, index) => { const img = document.createElement('img'); img.src = url; img.alt = `縮圖 ${index + 1}`; img.className = `${galleryItemClass} h-20 w-auto rounded-md cursor-pointer flex-shrink-0`; img.dataset.index = index + 1; slider.appendChild(img); });
    }
    renderThumbnails('.main-thumbnail-slider', mainImageUrls, 'main-gallery-item');
    renderThumbnails('.twin-thumbnail-slider', twinImageUrls, 'twin-gallery-item');
    renderThumbnails('.quad-thumbnail-slider', quadImageUrls, 'quad-gallery-item');
    renderThumbnails('.five-thumbnail-slider', fiveImageUrls, 'five-gallery-item');
    initializeLightbox('.main-gallery-item', 'main-lightbox', mainImageUrls);
    initializeLightbox('.twin-gallery-item', 'twin-lightbox', twinImageUrls);
    initializeLightbox('.quad-gallery-item', 'quad-lightbox', quadImageUrls);
    initializeLightbox('.five-gallery-item', 'five-lightbox', fiveImageUrls);
    const desktopMenuButton = document.getElementById('desktop-menu-button');
    const desktopMenu = document.getElementById('desktop-menu');
    desktopMenuButton.addEventListener('click', (event) => { event.stopPropagation(); desktopMenu.classList.toggle('hidden'); });
    window.addEventListener('click', (e) => { if (!desktopMenu.classList.contains('hidden') && !desktopMenuButton.contains(e.target)) { desktopMenu.classList.add('hidden'); } });

    // --- 預訂系統 ---
    const ROOM_TYPES = [ 
        { id: 'double', name: '【露營屋】雙人套房', limit: 2, weekdayPrice: 2900, weekendPrice: 4500, image: 'https://i.urusai.cc/bUrmL.png' }, 
        { id: 'quad', name: '【露營屋】四人套房', limit: 4, weekdayPrice: 4600, weekendPrice: 8100, image: 'https://i.urusai.cc/YbaSU.png' }, 
        { id: 'five', name: '【露營屋】五人房（四人雅房+單人床）', limit: 1, weekdayPrice: 5800, weekendPrice: 8100, image: 'https://i.urusai.cc/ZOfHR.png' } 
    ];
    const HOLIDAYS = [ '2025-01-01', '2025-01-28', '2025-01-29', '2025-01-30', '2025-01-31', '2025-02-28', '2025-04-04', '2025-05-31', '2025-10-06', '2025-10-10' ];
    const prevMonthButton = document.getElementById('prev-month');
    const nextMonthButton = document.getElementById('next-month');
    const calendarGrid = document.getElementById('calendar-grid');
    const calendarHeader = document.getElementById('calendar-header');
    const roomSelectionContainer = document.getElementById('room-selection');
    const selectedDatesDisplay = document.getElementById('selected-dates-display');
    const priceDetails = document.getElementById('price-details');
    const priceBreakdownContainer = document.getElementById('price-breakdown-container');
    const totalPriceEl = document.getElementById('total-price');
    const reserveButton = document.getElementById('reserve-button');
    const customerNameInput = document.getElementById('customer-name');
    const customerEmailInput = document.getElementById('customer-email');
    const bookingFormContainer = document.getElementById('booking-form-container');
    const bookingConfirmation = document.getElementById('booking-confirmation');
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();
    let startDate = null;
    let endDate = null;

    function initializeBookingSystem() {
        renderRoomSelectors();
        renderCalendar();
        addEventListeners();
        updateBookingState();
    }

    function renderRoomSelectors() {
        if(!roomSelectionContainer) return;
        roomSelectionContainer.innerHTML = '';
        ROOM_TYPES.forEach(room => {
            const roomEl = document.createElement('div');
            roomEl.className = 'flex justify-between items-center';
            roomEl.innerHTML = `<label for="room-${room.id}" class="text-sm font-medium text-gray-700">${room.name}</label><div class="flex items-center space-x-2"><button data-room-id="${room.id}" class="quantity-btn minus-btn w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300">-</button><span id="quantity-${room.id}" class="w-6 text-center">0</span><button data-room-id="${room.id}" class="quantity-btn plus-btn w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300">+</button></div>`;
            roomSelectionContainer.appendChild(roomEl);
        });
    }

    function renderCalendar() {
        if(!calendarHeader || !calendarGrid) return;
        calendarHeader.textContent = `${currentYear}年 ${currentMonth + 1}月`;
        calendarGrid.innerHTML = '';
        const header = document.createElement('div');
        header.className = 'grid grid-cols-7 gap-1 text-center text-sm text-gray-500 mb-2';
        ['日', '一', '二', '三', '四', '五', '六'].forEach(d => header.innerHTML += `<div>${d}</div>`);
        calendarGrid.appendChild(header);
        const body = document.createElement('div');
        body.className = 'grid grid-cols-7 gap-1 text-center';
        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        for (let i = 0; i < firstDay; i++) body.innerHTML += '<div></div>';
        for (let day = 1; day <= daysInMonth; day++) {
            const dayEl = document.createElement('button');
            dayEl.textContent = day;
            dayEl.className = 'calendar-day w-8 h-8 rounded-full hover:bg-gray-200 transition-colors mx-auto';
            const currentDate = new Date(currentYear, currentMonth, day);
            if (currentDate < today) {
                dayEl.classList.add('disabled');
            } else {
                dayEl.addEventListener('click', () => handleDateClick(currentDate));
            }
            updateDayStyle(dayEl, currentDate);
            body.appendChild(dayEl);
        }
        calendarGrid.appendChild(body);
    }
    
    function addEventListeners() {
        prevMonthButton?.addEventListener('click', () => { currentMonth--; if (currentMonth < 0) { currentMonth = 11; currentYear--; } renderCalendar(); });
        nextMonthButton?.addEventListener('click', () => { currentMonth++; if (currentMonth > 11) { currentMonth = 0; currentYear++; } renderCalendar(); });
        document.querySelectorAll('.quantity-btn').forEach(btn => btn.addEventListener('click', handleQuantityChange));
        customerNameInput?.addEventListener('input', updateBookingState);
        customerEmailInput?.addEventListener('input', updateBookingState);
        reserveButton?.addEventListener('click', handleReservation);
        addAccordionListeners();
        addRoomAccordionListeners();
    }

    function handleDateClick(date) {
        if (!startDate || (startDate && endDate)) { startDate = date; endDate = null; } 
        else if (date < startDate) { startDate = date; } 
        else { endDate = date; }
        renderCalendar();
        updateSelectedDatesDisplay();
        updateBookingState();
    }

    function handleQuantityChange(event) {
        const roomId = event.target.dataset.roomId;
        const room = ROOM_TYPES.find(r => r.id === roomId);
        const quantityEl = document.getElementById(`quantity-${roomId}`);
        let currentQuantity = parseInt(quantityEl.textContent);
        if (event.target.classList.contains('plus-btn')) { if (currentQuantity < room.limit) currentQuantity++; } 
        else if (event.target.classList.contains('minus-btn')) { if (currentQuantity > 0) currentQuantity--; }
        quantityEl.textContent = currentQuantity;
        updateBookingState();
    }

    function updateSelectedDatesDisplay() {
        if (!selectedDatesDisplay) return;
        const options = { year: 'numeric', month: '2-digit', day: '2-digit' };
        if (startDate && endDate) {
            const nights = Math.max(1, Math.ceil((endDate - startDate) / (1000 * 3600 * 24)));
            selectedDatesDisplay.textContent = `${startDate.toLocaleDateString('zh-TW', options)} - ${endDate.toLocaleDateString('zh-TW', options)} (${nights + 1}天${nights}夜)`;
        } else if (startDate) {
            selectedDatesDisplay.textContent = `${startDate.toLocaleDateString('zh-TW', options)} - 請選擇退房日期`;
        } else {
            selectedDatesDisplay.textContent = '請選擇入住與退房日期';
        }
    }

    function updateDayStyle(dayEl, currentDate) {
        if (dayEl.classList.contains('disabled')) return;
        if (startDate && startDate.getTime() === currentDate.getTime()) dayEl.classList.add('selected', 'range-start');
        if (endDate && endDate.getTime() === currentDate.getTime()) dayEl.classList.add('selected', 'range-end');
        if (startDate && endDate && currentDate > startDate && currentDate < endDate) dayEl.classList.add('in-range');
    }
    
    function updateBookingState() {
        let totalRooms = 0;
        ROOM_TYPES.forEach(room => {
            const quantityEl = document.getElementById(`quantity-${room.id}`);
            if(quantityEl) totalRooms += parseInt(quantityEl.textContent);
        });
        const name = customerNameInput.value.trim();
        const email = customerEmailInput.value.trim();
        const isEmailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

        const canShowPrice = startDate && endDate && totalRooms > 0;

        if (canShowPrice) {
            let totalCost = 0, breakdownHtml = '';
            ROOM_TYPES.forEach(room => {
                const quantityEl = document.getElementById(`quantity-${room.id}`);
                if(!quantityEl) return;
                const quantity = parseInt(quantityEl.textContent);
                if (quantity === 0) return;
                let nightlyPrices = [], roomSubtotal = 0;
                for (let d = new Date(startDate); d < endDate; d.setDate(d.getDate() + 1)) {
                    const isWeekend = d.getDay() === 5 || d.getDay() === 6;
                    const isHoliday = HOLIDAYS.includes(d.toISOString().split('T')[0]);
                    const price = (isWeekend || isHoliday) ? room.weekendPrice : room.weekdayPrice;
                    roomSubtotal += price;
                    nightlyPrices.push(price.toLocaleString());
                }
                const totalRoomPrice = roomSubtotal * quantity;
                totalCost += totalRoomPrice;
                breakdownHtml += `<div class="flex justify-between items-start text-gray-700 text-sm"><span class="flex-1 pr-2">${room.name} x ${quantity}<span class="text-xs text-gray-500 ml-1">(${nightlyPrices.join(' + ')})</span></span><span class="text-right font-medium">NT$ ${totalRoomPrice.toLocaleString()}</span></div>`;
            });
            priceDetails.classList.remove('hidden');
            priceBreakdownContainer.innerHTML = breakdownHtml;
            totalPriceEl.textContent = `NT$ ${totalCost.toLocaleString()}`;
        } else {
            priceDetails.classList.add('hidden');
        }

        const canReserve = canShowPrice && name && isEmailValid;
        if (canReserve) {
            reserveButton.disabled = false;
            reserveButton.classList.remove('opacity-50', 'cursor-not-allowed');
        } else {
            reserveButton.disabled = true;
            reserveButton.classList.add('opacity-50', 'cursor-not-allowed');
        }
    }
    
    function handleReservation(event) {
        event.preventDefault();
        reserveButton.disabled = true;
        reserveButton.innerHTML = '正在傳送...';

        const customerName = customerNameInput.value;
        const customerEmail = customerEmailInput.value;
        const dateString = selectedDatesDisplay.textContent;
        let roomDetailsHtml = '';
        let totalCost = 0;

        ROOM_TYPES.forEach(room => {
            const quantity = parseInt(document.getElementById(`quantity-${room.id}`).textContent);
            if (quantity > 0) {
                let nightlyPrices = [];
                let roomSubtotal = 0;
                for (let d = new Date(startDate); d < endDate; d.setDate(d.getDate() + 1)) {
                    const isWeekend = d.getDay() === 5 || d.getDay() === 6;
                    const isHoliday = HOLIDAYS.includes(d.toISOString().split('T')[0]);
                    const price = (isWeekend || isHoliday) ? room.weekendPrice : room.weekdayPrice;
                    roomSubtotal += price;
                    nightlyPrices.push(price.toLocaleString());
                }
                const totalRoomPrice = roomSubtotal * quantity;
                totalCost += totalRoomPrice;
                roomDetailsHtml += `
                    <tr>
                        <td colspan="2" style="padding: 16px 0; border-bottom: 1px solid #e9ecef;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="width: 100px; vertical-align: top;">
                                        <img src="${room.image}" alt="${room.name}" style="width: 80px; height: 80px; border-radius: 8px; object-fit: cover;">
                                    </td>
                                    <td style="vertical-align: top; padding-left: 16px;">
                                        <p style="margin: 0; font-weight: bold; color: #343a40;">${room.name} x ${quantity} 間</p>
                                        <p style="margin: 4px 0 0; font-size: 12px; color: #6c757d;">(${nightlyPrices.join(' + ')})</p>
                                    </td>
                                    <td style="vertical-align: middle; text-align: right; font-weight: bold; color: #343a40;">NT$ ${totalRoomPrice.toLocaleString()}</td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                `;
            }
        });
        
        const templateHtml = document.getElementById('email-template').innerHTML
            .replace('{{to_name}}', customerName)
            .replace('{{dates}}', dateString)
            .replace('{{room_details_html}}', roomDetailsHtml)
            .replace('{{total_price}}', `NT$ ${totalCost.toLocaleString()}`);

        const templateParams = {
            to_email: customerEmail,
            subject: `[訂房成功] 您的嶼野山隱訂房確認信`,
            html_content: templateHtml,
            cc_to: 'wedopr@gmail.com'
        };

        const serviceID = 'service_ords2m8';
        const templateID = 'template_q0yzi9i';
        const publicKey = '9ZPs0xUKexoRA-Ckm';

        emailjs.send(serviceID, templateID, templateParams, publicKey)
            .then(function(response) {
               console.log('SUCCESS!', response.status, response.text);
               bookingFormContainer.classList.add('hidden');
               bookingConfirmation.classList.remove('hidden');
            }, function(error) {
               console.log('FAILED...', error);
               alert('抱歉，訂單郵件發送失敗，請直接透過 LINE 或電話與我們聯繫。');
               reserveButton.disabled = false;
               reserveButton.innerHTML = '預訂';
            });
    }

    function addAccordionListeners() {
        document.querySelectorAll('.accordion-toggle').forEach(button => {
            button.addEventListener('click', () => {
                const content = button.nextElementSibling;
                const icon = button.querySelector('i');
                const isOpening = !content.style.maxHeight;
                document.querySelectorAll('.accordion-content').forEach(item => {
                    if (item !== content) { item.style.maxHeight = null; if(item.previousElementSibling.querySelector('i')) {item.previousElementSibling.querySelector('i').classList.remove('rotate-180');} }
                });
                if (isOpening) { content.style.maxHeight = content.scrollHeight + "px"; icon.classList.add('rotate-180'); } 
                else { content.style.maxHeight = null; icon.classList.remove('rotate-180'); }
            });
        });
    }

    function addRoomAccordionListeners() {
        document.querySelectorAll('.room-accordion-toggle').forEach(button => {
            button.addEventListener('click', () => {
                const content = button.nextElementSibling;
                const icon = button.querySelector('i');
                const textSpan = button.querySelector('span');
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                    icon.classList.remove('rotate-180');
                    textSpan.textContent = '顯示詳細設施';
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                    icon.classList.add('rotate-180');
                    textSpan.textContent = '隱藏詳細設施';
                }
            });
        });
    }

    initializeBookingSystem();
});
</script>
</body>
</html>

